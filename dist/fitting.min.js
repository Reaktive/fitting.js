function FittingModals(){var t=this;return t.parent="body",t.container="div",t.class="",t.content_type="text",t.effect="slide",t.style="dark",t.outter_click=!0,t.title="",t.close="",t.alert={text:"",button:""},t.html="",t.text="",t.confirm_fields=[],t.form_fields=[],t.method="POST",t.submit_txt="Submit",t.gui={container:"",header:"",header_button:"",content:"",content_html:"",content_button:""},t.onshow=function(){},t.onhide=function(){},t.onsubmit=function(){},t.onconfirm=function(){},t.parent_element=document.getElementById(t.parent),t.init=function(e){void 0!==e&&(t.parent=void 0===e.parent?"body":e.parent,t.container=void 0===e.container?"div":e.container,t.class=void 0===e.class?"":e.class,t.content_type=void 0===e.content_type?"text":e.content_type,t.effect=void 0===e.effect?"fade":e.effect,t.style=void 0===e.style?"dark":e.style,t.outter_click=void 0===e.outter_click||e.outter_click,t.title=void 0===e.title?"":e.title,t.close=void 0===e.close?"":e.close,t.text=void 0===e.text?"":e.text,t.alert=void 0===e.alert?{text:"",button:""}:{text:e.alert.text,button:e.alert.button},t.method=void 0===e.method?"POST":e.method,t.submit_txt=void 0===e.submit_txt?"":e.submit_txt,t.html=void 0===e.html?"":e.html,t.form_fields=void 0===e.form_fields?[]:e.form_fields,t.confirm_fields=void 0===e.confirm_fields?[]:e.confirm_fields,t.gui={container:"",header:"",header_button:"",content:"",content_button:""},void 0!==e.gui&&(t.gui={container:void 0===e.gui.container?"":e.gui.container,header:void 0===e.gui.header?"":e.gui.header,header_button:void 0===e.gui.header_button?"":e.gui.header_button,content:void 0===e.gui.content?"":e.gui.content,content_html:void 0===e.gui.content_html?"":e.gui.content_html,content_button:void 0===e.gui.content_button?"":e.gui.content_button}),t.onshow=void 0===e.onshow?function(){}:e.onshow,t.onhide=void 0===e.onhide?function(){}:e.onhide,t.onsubmit=void 0===e.onsubmit?function(){}:e.onsubmit,t.onconfirm=void 0===e.onconfirm?function(){}:e.onconfirm,t.parent_element=document.querySelector(t.parent))},t.show=function(e){t.element=document.createElement(t.container),t.element.classList.add("fitting_container"),t.element.classList.add(t.style),t.element.classList.add(t.effect),t.element.classList.add("type_"+t.content_type),t.element.classList.add(void 0===t.title||""===t.title?"fitting_no_title":"fitting_with_title"),t.element.setAttribute("style",t.gui.container),t.element.innerHTML='<div class="fitting_wrapper"><div class="fitting_modal '+t.class+'"><div class="fitting_title" style="'+t.gui.header+'">'+(void 0===t.title||""===t.title?"":"<h3>"+t.title+"</h3>")+'<a href="javascript:;" class="fitting_close" style="'+t.gui.header_button+'">'+t.close+'</a></div><div class="fitting_content" style="'+t.gui.content+'">'+t.content()+"</div></div></div>",void 0!==e&&"prepend"===e?t.parent_element.insertBefore(t.element,t.parent_element.firstChild):t.parent_element.appendChild(t.element),t.resize(),"form"===t.content_type?(document.querySelector("#fitting_form").onsubmit=function(e){t.onsubmit(t.serialize(),e)},document.querySelector("#fitting_form").submit=function(e){t.onsubmit(t.serialize(),e)}):"confirm"===t.content_type?(document.querySelector("#fitting_form").onsubmit=function(e){t.onconfirm(e.value)},document.querySelector("#fitting_form").submit=function(e){t.onconfirm(e.value)}):"alert"===t.content_type&&(document.querySelector("#fitting_form").onsubmit=function(e){return t.hide(),!1},document.querySelector("#fitting_form").submit=function(e){return t.hide(),!1});var i=new Event("close_fitting");!0===t.outter_click&&(document.querySelector(".fitting_modal").onclick=function(t){t.stopPropagation()},document.querySelector(".fitting_wrapper").onclick=function(t){document.dispatchEvent(i)}),document.querySelector(".fitting_close").onclick=function(t){document.dispatchEvent(i)},setTimeout(function(){document.addEventListener("close_fitting",t.hide),document.querySelector(".fitting_container").classList.add("active"),t.onshow()},100)},t.hide=function(){document.querySelector(".fitting_container").classList.remove("active"),setTimeout(function(){document.removeEventListener("close_fitting",function(){}),t.parent_element.removeChild(t.element),t.onhide()},300)},t.content=function(){if(void 0!==t)switch(t.content_type){case"text":return void 0===t.text||""===t.text?"<p class='fitting_content_text'></p>":"<p class='fitting_content_text'>"+t.text+"</p>";case"alert":return"<form id='fitting_form' class='fitting_content_alert' method='"+t.method+"'>"+(void 0===t.alert.text||""===t.alert.text?"":"<p class='fitting_content_alert'>"+t.alert.text+"</p>")+"<label class='fitting_button btn_alert' style='"+t.gui.content_button+"' for='fitting_submit'>"+(void 0===t.alert.button||""===t.alert.button?"":t.alert.button)+"<input type='submit' id='fitting_submit'></label></form>";case"confirm":if(void 0===t.confirm_fields||t.confirm_fields.length<1)return"<form id='fitting_form' class='fitting_content_confirm' method='"+t.method+"'><p>Missing confirm_fields!</p></form>";i="<form id='fitting_form' class='fitting_content_confirm' method='"+t.method+"'>";i+=void 0===t.text||""===t.text?"":"<p class='fitting_content_text'>"+t.text+"</p>",i+="<div class='fitting_griddy wrap'>";for(n=0;n<t.confirm_fields.length;n++){var e="<div class='fitting_col' style='flex-grow:1'>";void 0!==t.confirm_fields[n].label&&void 0!==t.confirm_fields[n].value&&""!==t.confirm_fields[n].label&&""!==t.confirm_fields[n].value&&(e+="<label class='fitting_button btn_confirm_"+n+"' style='"+t.gui.content_button+"'>"+t.confirm_fields[n].label+" <input type='radio' name='confirm' value='"+t.confirm_fields[n].value+"' onchange='document.querySelector(\"#fitting_form\").submit(this)'></label>"),i+=e+="</div>"}return i+="</div></form>";case"html":return void 0===t.html||""===t.html?"<div class='fitting_content_html' style='"+t.gui.content_html+"'></div>":"<div class='fitting_content_html' style='"+t.gui.content_html+"'>"+t.html+"</div>";case"form":if(void 0===t.form_fields||t.form_fields.length<1)return"<form id='fitting_form' class='fitting_content_form' method='"+t.method+"'></form>";var i="<form id='fitting_form' class='fitting_content_form' method='"+t.method+"'>";i+=void 0===t.html||""===t.html?"":"<div class='fitting_html' style='"+t.gui.content_html+"'>"+t.html+"</div>",i+="<div class='fitting_griddy wrap'>";for(var n=0;n<t.form_fields.length;n++){var o=t.form_fields[n],l={};void 0===o.name&&void 0===o.placeholder?(l.name="",l.placeholder="Define a placeholder"):void 0!==o.name&&void 0===o.placeholder?(l.name=o.name,l.placeholder="Define a placeholder"):void 0===o.name&&void 0!==o.placeholder?(l.name="",l.placeholder=o.placeholder):(l.name=o.name,l.placeholder=o.placeholder),void 0===o.value?l.value="":l.value=o.value,void 0!==o.required&&!0===o.required?l.required=" required='required' ":l.required=" ";var a="<div class='fitting_col col_"+o.type+"' style='flex-grow:1'><div class='formfield'>";if(void 0===o.label?a+="<label>Define a label</label>":a+="<label>"+o.label+"</label>",a+="<div class='margin_fix'>",void 0===o.type||""===o.type)a+="<input "+l.required+" value='"+l.value+"' class='fitting_text' name='"+l.name+"' placeholder='"+l.placeholder+"' type='text'>";else switch(o.type){case"text":a+="<input "+l.required+" value='"+l.value+"' class='fitting_"+o.type+"' name='"+l.name+"' placeholder='"+l.placeholder+"' type='text'>";break;case"number":a+="<input "+l.required+" value='"+l.value+"' class='fitting_"+o.type+"' name='"+l.name+"' placeholder='"+l.placeholder+"' type='number'>";break;case"email":a+="<input "+l.required+" value='"+l.value+"' class='fitting_"+o.type+"' name='"+l.name+"' placeholder='"+l.placeholder+"' type='email'>";break;case"checkbox":a+="<input "+l.required+" value='"+l.value+"' class='fitting_"+o.type+"' name='"+l.name+"' placeholder='"+l.placeholder+"' type='checkbox'>";break;case"radio":a+="<input "+l.required+" value='"+l.value+"' class='fitting_"+o.type+"' name='"+l.name+"' placeholder='"+l.placeholder+"' type='radio'>";break;case"tel":a+="<input "+l.required+" value='"+l.value+"' class='fitting_"+o.type+"' name='"+l.name+"' placeholder='"+l.placeholder+"' type='tel'>";break;case"textarea":a+="<textarea "+l.required+" value='"+l.value+"' class='fitting_"+o.type+"' name='"+l.name+"' placeholder='"+l.placeholder+"'>"+l.value+"</textarea>";break;case"select":void 0===o.options?l.options=[]:l.options=o.options,a+="<select "+l.required+" class='fitting_"+o.type+"' name='"+l.name+"'>",""===l.value?a+="<option value='' selected disabled>"+l.placeholder+"</option>":a+="<option value='' disabled>"+l.placeholder+"</option>";for(var r=0;r<l.options.length;r++)""!==l.value&&l.options[n].value===l.value?a+="<option value='"+l.options[r].value+"' selected>"+l.options[r].label+"</option>":a+="<option value='"+l.options[r].value+"'>"+l.options[r].label+"</option>";a+="</select>";break;default:console.warn(o.type+" is not recognized!")}i+=a+="</div></div></div>"}return i+="<div class='fitting_col' style='min-width:100%;'>",i+=void 0===t.text||""===t.text?"":"<p class='fitting_content_text'>"+t.text+"</p>",i+="<div class='fitting_submit'><button type='submit' style='"+t.gui.content_button+"'>"+(void 0===t.submit_txt||""===t.submit_txt?"Submit":t.submit_txt)+"</button></div></div>",i+="</div></form>";default:return}},t.serialize=function(){var e=t.parent_element.getElementsByTagName("form")[0],i={};if("object"==typeof e&&"form"==e.nodeName.toLowerCase()){for(var n=e.getElementsByTagName("input"),o=0;o<n.length;o++)i[n[o].getAttribute("name")]=n[o].value;for(var l=e.getElementsByTagName("select"),o=0;o<l.length;o++)i[l[o].getAttribute("name")]=l[o].value;for(var a=e.getElementsByTagName("textarea"),o=0;o<a.length;o++)i[a[o].getAttribute("name")]=a[o].value}return JSON.stringify(i)},t.resize=function(){t.fitting_modal=document.querySelector(".fitting_modal"),t.fitting_title=document.querySelector(".fitting_title"),t.fitting_content=document.querySelector(".fitting_content");window.getComputedStyle(t.fitting_modal,null);var e=window.getComputedStyle(t.fitting_title,null),i=window.getComputedStyle(t.fitting_content,null),n=window.getComputedStyle(t.fitting_content.childNodes[0],null),o=!0===t.fitting_content.childNodes[0].childNodes[0].hasChildNodes()?window.getComputedStyle(t.fitting_content.childNodes[0].childNodes[0],null):null;t.fitting_height=parseInt(e.getPropertyValue("height"))+parseInt(e.getPropertyValue("padding-top"))+parseInt(e.getPropertyValue("padding-bottom"))+parseInt(e.getPropertyValue("margin-top"))+parseInt(e.getPropertyValue("margin-bottom"))+parseInt(i.getPropertyValue("padding-top"))+parseInt(i.getPropertyValue("padding-bottom"))+parseInt(i.getPropertyValue("margin-top"))+parseInt(i.getPropertyValue("margin-bottom"))+(null===o?0:parseInt(o.getPropertyValue("margin-top")))+parseInt(n.getPropertyValue("height"))+parseInt(n.getPropertyValue("padding-top"))+parseInt(n.getPropertyValue("padding-bottom"))+parseInt(n.getPropertyValue("margin-top"))+parseInt(n.getPropertyValue("margin-bottom"));var l=parseInt(t.parent_element.offsetHeight);t.element.setAttribute("style",t.gui.container),l=parseInt(window.innerHeight),t.fitting_margin=(parseInt(l)-t.fitting_height)/2,t.fitting_modal.style.height=t.fitting_height+"px",t.fitting_modal.style.marginTop=Math.max(0,t.fitting_margin)+"px",t.fitting_modal.style.marginBottom=Math.max(0,t.fitting_margin)+"px"},window.addEventListener("resize",function(){t.resize()}),t}
